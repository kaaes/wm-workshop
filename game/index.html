 <!DOCTYPE html>
 <html>
  <head>
    <title>Some people</title>
    <meta charset="utf-8">
    <link href="http://fonts.googleapis.com/css?family=Cousine&subset=latin" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="game.css">
  </head>
  <body>
    <audio id="step-sound" src="sounds/step.ogg">
      Your browser does not support the <code>audio</code> element.
    </audio>
    <audio id="nom-sound" src="sounds/sd_0.ogg">
      Your browser does not support the <code>audio</code> element.
    </audio>
    <div id="gameboard">
      <ul id="players">
      </ul>
    </div>
    <script src="game.js"></script>
    <script>
      (function() {

        var stepSound = document.querySelector('#step-sound');
        var nomSound = document.querySelector('#nom-sound');

        var game, player, goodie;
        
        game = new Game(document.querySelector('#gameboard'), { tilesize: 50 });
        
        game.createBoard(15, 10);

        game.addGoodies(30, { energy: 40, sound: nomSound });

        game.addPlayer('Fiona', 'prince', { x: 1, y: 2 });
        game.addPlayer('John','monk', { x: 5, y: 4 });

        game.setActivePlayer(0);

        document.body.addEventListener('keydown', movePlayer, false);
        document.body.addEventListener('keydown', switchPlayer, false);

        function switchPlayer(ev) {
          if (ev.which === 9) {
            var currentPlayerIndex = game.players.indexOf(game.activePlayer);
            var newIndex;
            if (game.players[currentPlayerIndex + 1]) {
              newIndex = currentPlayerIndex + 1;
            } else {
              newIndex = 0
            }

            game.setActivePlayer(newIndex);

            ev.preventDefault();
          }
        }

        function movePlayer(ev) {
          var move = false, x, y;
          
          switch (ev.which) {
            case 32: // space
              break;
            
            case 39: // right
              //x = 1;
              //y = 0;
              game.moveRight();
              break;
            
            case 37: // left
              //x = -1;
              //y = 0;
              game.moveLeft();
              break;
            
            case 38: // up
              //x = 0;
              //y = -1;
              game.moveUp();
              break;
            
            case 40: // down
              //x = 0;
              //y = 1;
              game.moveDown();
              break;
            
            default:
              move = false;
              break;
          }
          
          if (move) {
            
            stepSound.play();
            game.movePlayer(x, y);
            
            setTimeout(function(){
              stepSound.pause();
              stepSound.currentTime = 0;
            }, 300)
            
            ev.preventDefault();
          }
          
        }
        //         for (var i = 0; i < 30; i++) {

        //   goodie = new Block('food', { tilesize: 50, energy: 40, sound: nomSound });

        //   game.addGoodie(goodie);
        // }

        // player = new Player('Fiona', 'princess', { tilesize: 50, position: { x: 3, y: 2 } });
        
        // game.addPlayer(player);
        
        // game.addPlayer(new Player('Lara', 'bunny', { tilesize: 50, position: { x: 5, y: 5 } }));
      })();
    </script>
  </body>
</html>